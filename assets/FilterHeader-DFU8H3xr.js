import{d as W,r as y,a as c,n as p,T as x,b as h,e as i,B as j,w as f,F as w,f as N,g as P,Y as T,P as q,o as n,_ as A}from"./index-K-9wvg5E.js";import"./index-R9REr-6p.js";import{F as G}from"./index-C6rNtyvH.js";import{S as J}from"./index-BmPhYbYV.js";import{N as K}from"./index-B44WjXQ1.js";import{P as O,D as Q}from"./index-Bj_5OvyO.js";const X={key:0,class:"filter-header__nav"},Z={class:"filter-header__search-section"},ee={class:"filter-header__search-wrapper"},te={class:"filter-header__filter-content"},ae={class:"filter-header__filter-grid"},le={class:"filter-header__filter-actions"},re=W({__name:"FilterHeader",props:{title:{},searchPlaceholder:{default:"搜尋商家、職位或應徵編號"},filterConfig:{},sticky:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0}},emits:["updateFilter","search","toggleFilter","reset"],setup(s,{emit:z}){const b=s,v=z,k=y(!1),g=y(""),d=y({}),C=y({}),m=y({}),L=()=>{k.value=!k.value,v("toggleFilter")},F=t=>{v("search",t)},S=(t,a)=>{v("updateFilter",t,a)},Y=()=>{g.value="",v("reset")},U=t=>{const a=b.filterConfig.fields.find(l=>l.key===t);if(a){if(a.type==="select"){const l=b.filterConfig.values[t];C.value[t]=[l]}else if(a.type==="date"){const l=b.filterConfig.values[t];if(l){const r=new Date(l);m.value[t]=[r.getFullYear().toString(),(r.getMonth()+1).toString().padStart(2,"0"),r.getDate().toString().padStart(2,"0")]}else{const r=new Date;m.value[t]=[r.getFullYear().toString(),(r.getMonth()+1).toString().padStart(2,"0"),r.getDate().toString().padStart(2,"0")]}}d.value[t]=!0}},V=t=>{d.value[t]=!1},$=(t,a)=>!a&&a!==0?t.placeholder||t.label:t.type==="select"&&t.options?t.options.find(r=>r.value===a)?.text||t.placeholder||t.label:t.type==="date"?a?new Date(a).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):t.placeholder||"yyyy/月/dd":t.type==="number"||t.type==="text"?a.toString():t.placeholder||t.label,E=t=>{const a=C.value[t.key],l=a&&a.length>0?a[0]:null;l!==null&&S(t.key,l),V(t.key)},H=t=>{V(t.key)},I=t=>{const a=m.value[t.key];if(a&&a.length>=3){const[l,r,_]=a,u=`${l}-${r.padStart(2,"0")}-${_.padStart(2,"0")}`;S(t.key,u)}V(t.key)},D=(t,a)=>{S(t.key,a)};return(t,a)=>{const l=K,r=J,_=j,u=G,M=O,B=q,R=Q;return n(),c("div",{class:p(["filter-header",{"filter-header--sticky":s.sticky}])},[s.showTitle?(n(),c("div",X,[i(l,{title:s.title,"left-arrow":"",onClickLeft:a[0]||(a[0]=e=>t.$router.back()),class:"filter-header__nav-bar"},null,8,["title"])])):x("",!0),h("div",Z,[h("div",ee,[i(r,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),placeholder:s.searchPlaceholder,onSearch:F,onClear:a[2]||(a[2]=()=>F("")),class:"filter-header__search"},null,8,["modelValue","placeholder"])]),i(_,{type:"primary",size:"small",class:"filter-header__search-btn",onClick:a[3]||(a[3]=e=>F(g.value))},{default:f(()=>[...a[4]||(a[4]=[P(" 搜尋 ",-1)])]),_:1}),i(_,{type:k.value?"primary":"default",size:"small",class:"filter-header__filter-btn",onClick:L},{default:f(()=>[...a[5]||(a[5]=[P(" 篩選 ",-1)])]),_:1},8,["type"])]),h("div",{class:p(["filter-header__filter-panel",{"filter-header__filter-panel--expanded":k.value}])},[h("div",te,[h("div",ae,[(n(!0),c(w,null,N(s.filterConfig.fields,e=>(n(),c(w,{key:e.key},[e.type==="select"?(n(),c("div",{key:0,class:p(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(u,{"model-value":$(e,s.filterConfig.values[e.key]),placeholder:e.placeholder||e.label,readonly:"","is-link":"",onClick:o=>U(e.key),class:"filter-header__select-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="date"?(n(),c("div",{key:1,class:p(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(u,{"model-value":$(e,s.filterConfig.values[e.key]),placeholder:e.placeholder||e.label,readonly:"","is-link":"",onClick:o=>U(e.key),class:"filter-header__date-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="number"?(n(),c("div",{key:2,class:p(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(u,{"model-value":s.filterConfig.values[e.key],type:"number",placeholder:e.placeholder||e.label,min:e.min,max:e.max,step:e.step,"onUpdate:modelValue":o=>D(e,o),class:"filter-header__number-input"},null,8,["model-value","placeholder","min","max","step","onUpdate:modelValue"])],2)):e.type==="text"?(n(),c("div",{key:3,class:p(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(u,{"model-value":s.filterConfig.values[e.key],type:"text",placeholder:e.placeholder||e.label,"onUpdate:modelValue":o=>D(e,o),class:"filter-header__text-input"},null,8,["model-value","placeholder","onUpdate:modelValue"])],2)):x("",!0)],64))),128))]),h("div",le,[i(_,{type:"default",size:"small",class:"filter-header__reset-btn",onClick:Y},{default:f(()=>[...a[6]||(a[6]=[P(" 重置 ",-1)])]),_:1})])])],2),(n(!0),c(w,null,N(s.filterConfig.fields,e=>(n(),c(w,{key:`picker-${e.key}`},[e.type==="select"?(n(),T(B,{key:0,show:d.value[e.key],"onUpdate:show":o=>d.value[e.key]=o,position:"bottom","destroy-on-close":"",round:""},{default:f(()=>[i(M,{modelValue:C.value[e.key],"onUpdate:modelValue":o=>C.value[e.key]=o,columns:e.options||[],onConfirm:()=>E(e),onCancel:()=>H(e)},null,8,["modelValue","onUpdate:modelValue","columns","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):e.type==="date"?(n(),T(B,{key:1,show:d.value[e.key],"onUpdate:show":o=>d.value[e.key]=o,position:"bottom","destroy-on-close":"",round:""},{default:f(()=>[i(R,{modelValue:m.value[e.key],"onUpdate:modelValue":o=>m.value[e.key]=o,onConfirm:()=>I(e),onCancel:()=>V(e.key)},null,8,["modelValue","onUpdate:modelValue","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):x("",!0)],64))),128))],2)}}}),ue=A(re,[["__scopeId","data-v-34f17062"]]);export{ue as F};
