import{a as v,p as _,s as A,f as E}from"./index-R9REr-6p.js";import{d as I,a0 as K,k as L,r as k,c as O,L as C,y as b,e as D,O as U,D as $,K as u,ab as P,R as j}from"./index-K-9wvg5E.js";import{P as q}from"./index-Bj_5OvyO.js";const[z]=L("time-picker"),V=a=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(a),B=["hour","minute","second"],F=K({},A,{minHour:u(0),maxHour:u(23),minMinute:u(0),maxMinute:u(59),minSecond:u(0),maxSecond:u(59),minTime:{type:String,validator:V},maxTime:{type:String,validator:V},columnsType:{type:Array,default:()=>["hour","minute"]}});var G=I({name:z,props:F,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:f,slots:y}){const n=k(a.modelValue),T=k(),x=e=>{const i=e.split(":");return B.map((r,l)=>a.columnsType.includes(r)?i[l]:"00")},H=()=>{var e;return(e=T.value)==null?void 0:e.confirm()},M=()=>n.value,h=O(()=>{let{minHour:e,maxHour:i,minMinute:r,maxMinute:l,minSecond:g,maxSecond:S}=a;if(a.minTime||a.maxTime){const t={hour:0,minute:0,second:0};a.columnsType.forEach((s,d)=>{var c;t[s]=(c=n.value[d])!=null?c:0});const{hour:m,minute:o}=t;if(a.minTime){const[s,d,c]=x(a.minTime);e=s,r=+m<=+e?d:"00",g=+m<=+e&&+o<=+r?c:"00"}if(a.maxTime){const[s,d,c]=x(a.maxTime);i=s,l=+m>=+i?d:"59",S=+m>=+i&&+o>=+l?c:"59"}}return a.columnsType.map(t=>{const{filter:m,formatter:o}=a;switch(t){case"hour":return v(+e,+i,t,o,m,n.value);case"minute":return v(+r,+l,t,o,m,n.value);case"second":return v(+g,+S,t,o,m,n.value);default:return[]}})});C(n,e=>{P(e,a.modelValue)||f("update:modelValue",e)}),C(()=>a.modelValue,e=>{e=E(e,h.value),P(e,n.value)||(n.value=e)},{immediate:!0});const p=(...e)=>f("change",...e),N=(...e)=>f("cancel",...e),R=(...e)=>f("confirm",...e);return b({confirm:H,getSelectedTime:M}),()=>D(q,U({ref:T,modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:h.value,onChange:p,onCancel:N,onConfirm:R},$(a,_)),y)}});const X=j(G);export{X as T};
