import{b,p as I,a as m,g as N,s as A,f as B}from"./index-R9REr-6p.js";import{R as V,d as G,a0 as K,k as L,r as i,c as y,L as x,y as U,e as $,O as j,D as q,G as M,ab as d}from"./index-K-9wvg5E.js";const z=V(b),Y=new Date().getFullYear(),[H]=L("date-picker"),J=K({},A,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(Y-10,0,1),validator:M},maxDate:{type:Date,default:()=>new Date(Y+10,11,31),validator:M}});var Q=G({name:H,props:J,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:c,slots:k}){const n=i(a.modelValue),l=i(!1),f=i(),r=y(()=>l.value?a.modelValue:n.value),D=e=>e===a.minDate.getFullYear(),g=e=>e===a.maxDate.getFullYear(),C=e=>e===a.minDate.getMonth()+1,P=e=>e===a.maxDate.getMonth()+1,s=e=>{const{minDate:t,columnsType:o}=a,u=o.indexOf(e),v=r.value[u];if(v)return+v;switch(e){case"year":return t.getFullYear();case"month":return t.getMonth()+1;case"day":return t.getDate()}},F=()=>{const e=a.minDate.getFullYear(),t=a.maxDate.getFullYear();return m(e,t,"year",a.formatter,a.filter,r.value)},O=()=>{const e=s("year"),t=D(e)?a.minDate.getMonth()+1:1,o=g(e)?a.maxDate.getMonth()+1:12;return m(t,o,"month",a.formatter,a.filter,r.value)},w=()=>{const e=s("year"),t=s("month"),o=D(e)&&C(t)?a.minDate.getDate():1,u=g(e)&&P(t)?a.maxDate.getDate():N(e,t);return m(o,u,"day",a.formatter,a.filter,r.value)},E=()=>{var e;return(e=f.value)==null?void 0:e.confirm()},R=()=>n.value,h=y(()=>a.columnsType.map(e=>{switch(e){case"year":return F();case"month":return O();case"day":return w();default:return[]}}));x(n,e=>{d(e,a.modelValue)||c("update:modelValue",e)}),x(()=>a.modelValue,(e,t)=>{l.value=d(t,n.value),e=B(e,h.value),d(e,n.value)||(n.value=e),l.value=!1},{immediate:!0});const S=(...e)=>c("change",...e),T=(...e)=>c("cancel",...e),_=(...e)=>c("confirm",...e);return U({confirm:E,getSelectedDate:R}),()=>$(z,j({ref:f,modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:h.value,onChange:S,onCancel:T,onConfirm:_},q(a,I)),k)}});const Z=V(Q);export{Z as D,z as P};
