import{d as G,r as k,l as d,H as c,N as V,q as m,e as i,M as P,B as R,y as _,v as w,x as T,A as S,C as W,P as j,G as s,_ as J}from"./index-D9wYTDFn.js";import"./index-BCIUGFk7.js";import{F as K}from"./index-tX8Cw9F2.js";import{S as O}from"./index-BQwdpVRO.js";import{N as Q}from"./index-lwjahPF6.js";import{P as X,D as Z}from"./index-Cxlnchgb.js";const ee={key:0,class:"filter-header__nav"},te={class:"filter-header__search-section"},ae={class:"filter-header__search-wrapper"},le={class:"filter-header__filter-content"},re={class:"filter-header__filter-grid"},oe={class:"filter-header__filter-actions"},ne=G({__name:"FilterHeader",props:{title:{},searchPlaceholder:{default:"搜尋商家、職位或應徵編號"},filterConfig:{},sticky:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!1},addButtonText:{default:"新增"}},emits:["updateFilter","search","toggleFilter","reset","add"],setup(r,{emit:z}){const F=r,y=z,v=k(!1),g=k(""),u=k({}),C=k({}),f=k({}),A=()=>{v.value=!v.value,y("toggleFilter")},x=t=>{y("search",t)},B=(t,a)=>{y("updateFilter",t,a)},H=()=>{g.value="",y("reset")},U=t=>{const a=F.filterConfig.fields.find(l=>l.key===t);if(!(!a||a.disabled)){if(a.type==="select"){const l=F.filterConfig.values[t];C.value[t]=[l]}else if(a.type==="date"){const l=F.filterConfig.values[t];if(l){const o=new Date(l);f.value[t]=[o.getFullYear().toString(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")]}else{const o=new Date;f.value[t]=[o.getFullYear().toString(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")]}}u.value[t]=!0}},b=t=>{u.value[t]=!1},$=(t,a)=>!a&&a!==0?t.placeholder||t.label:t.type==="select"&&t.options?t.options.find(o=>o.value===a)?.text||t.placeholder||t.label:t.type==="date"?a?new Date(a).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):t.placeholder||"yyyy/月/dd":t.type==="number"||t.type==="text"?a.toString():t.placeholder||t.label,L=t=>{const a=C.value[t.key],l=a&&a.length>0?a[0]:null;l!==null&&B(t.key,l),b(t.key)},M=t=>{b(t.key)},E=t=>{const a=f.value[t.key];if(a&&a.length>=3){const[l,o,p]=a,h=`${l}-${o.padStart(2,"0")}-${p.padStart(2,"0")}`;B(t.key,h)}b(t.key)},D=(t,a)=>{B(t.key,a)},I=()=>{y("add")};return(t,a)=>{const l=Q,o=O,p=R,h=K,Y=X,N=j,q=Z;return s(),d("div",{class:c(["filter-header",{"filter-header--sticky":r.sticky}])},[r.showTitle?(s(),d("div",ee,[i(l,{title:r.title,"left-arrow":"",onClickLeft:a[0]||(a[0]=e=>t.$router.back()),class:"filter-header__nav-bar"},null,8,["title"])])):V("",!0),m("div",te,[m("div",ae,[i(o,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),placeholder:r.searchPlaceholder,onSearch:x,onClear:a[2]||(a[2]=()=>x("")),class:"filter-header__search"},null,8,["modelValue","placeholder"])]),i(p,{type:"primary",size:"small",class:"filter-header__search-btn",onClick:a[3]||(a[3]=e=>x(g.value))},{default:_(()=>[...a[4]||(a[4]=[S(" 搜尋 ",-1)])]),_:1}),i(p,{type:v.value?"primary":"default",size:"small",class:"filter-header__filter-btn",onClick:A},{default:_(()=>[...a[5]||(a[5]=[S(" 篩選 ",-1)])]),_:1},8,["type"]),r.showAddButton?(s(),P(p,{key:0,type:"primary",size:"small",class:"filter-header__add-btn",onClick:I},{default:_(()=>[S(W(r.addButtonText),1)]),_:1})):V("",!0)]),m("div",{class:c(["filter-header__filter-panel",{"filter-header__filter-panel--expanded":v.value}])},[m("div",le,[m("div",re,[(s(!0),d(w,null,T(r.filterConfig.fields,e=>(s(),d(w,{key:e.key},[e.type==="select"?(s(),d("div",{key:0,class:c(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(h,{"model-value":$(e,r.filterConfig.values[e.key]),placeholder:e.placeholder||e.label,readonly:"","is-link":"",onClick:n=>U(e.key),class:"filter-header__select-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="date"?(s(),d("div",{key:1,class:c(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(h,{"model-value":$(e,r.filterConfig.values[e.key]),placeholder:e.placeholder||e.label,readonly:"",disabled:e.disabled,"is-link":"",onClick:n=>e.disabled?null:U(e.key),class:c(["filter-header__date-input",{"filter-header__date-input--disabled":e.disabled}])},null,8,["model-value","placeholder","disabled","onClick","class"])],2)):e.type==="number"?(s(),d("div",{key:2,class:c(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(h,{"model-value":r.filterConfig.values[e.key],type:"number",placeholder:e.placeholder||e.label,min:e.min,max:e.max,step:e.step,"onUpdate:modelValue":n=>D(e,n),class:"filter-header__number-input"},null,8,["model-value","placeholder","min","max","step","onUpdate:modelValue"])],2)):e.type==="text"?(s(),d("div",{key:3,class:c(["filter-header__filter-item filter-header__filter-item--input",`filter-header__filter-item--${e.width||"half"}`])},[i(h,{"model-value":r.filterConfig.values[e.key],type:"text",placeholder:e.placeholder||e.label,"onUpdate:modelValue":n=>D(e,n),class:"filter-header__text-input"},null,8,["model-value","placeholder","onUpdate:modelValue"])],2)):V("",!0)],64))),128))]),m("div",oe,[i(p,{type:"default",size:"small",class:"filter-header__reset-btn",onClick:H},{default:_(()=>[...a[6]||(a[6]=[S(" 重置 ",-1)])]),_:1})])])],2),(s(!0),d(w,null,T(r.filterConfig.fields,e=>(s(),d(w,{key:`picker-${e.key}`},[e.type==="select"?(s(),P(N,{key:0,show:u.value[e.key],"onUpdate:show":n=>u.value[e.key]=n,position:"bottom","destroy-on-close":"",round:""},{default:_(()=>[i(Y,{modelValue:C.value[e.key],"onUpdate:modelValue":n=>C.value[e.key]=n,columns:e.options||[],onConfirm:()=>L(e),onCancel:()=>M(e)},null,8,["modelValue","onUpdate:modelValue","columns","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):e.type==="date"?(s(),P(N,{key:1,show:u.value[e.key],"onUpdate:show":n=>u.value[e.key]=n,position:"bottom","destroy-on-close":"",round:""},{default:_(()=>[i(q,{modelValue:f.value[e.key],"onUpdate:modelValue":n=>f.value[e.key]=n,onConfirm:()=>E(e),onCancel:()=>b(e.key)},null,8,["modelValue","onUpdate:modelValue","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):V("",!0)],64))),128))],2)}}}),he=J(ne,[["__scopeId","data-v-ec51f634"]]);export{he as F};
