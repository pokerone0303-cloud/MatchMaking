import{g as v,p as A,s as E,f as I}from"./index-DzpEujkO.js";import{d as R,f as b,c as j,r as k,g as K,h as C,b as L,e as O,m as U,i as $,j as u,k as P,w as q}from"./index-C0EGTbts.js";import{P as w}from"./index-BGRkTP_z.js";const[z]=j("time-picker"),V=n=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(n),B=["hour","minute","second"],D=b({},E,{minHour:u(0),maxHour:u(23),minMinute:u(0),maxMinute:u(59),minSecond:u(0),maxSecond:u(59),minTime:{type:String,validator:V},maxTime:{type:String,validator:V},columnsType:{type:Array,default:()=>["hour","minute"]}});var F=R({name:z,props:D,emits:["confirm","cancel","change","update:modelValue"],setup(n,{emit:f,slots:y}){const a=k(n.modelValue),T=k(),h=e=>{const i=e.split(":");return B.map((r,l)=>n.columnsType.includes(r)?i[l]:"00")},H=()=>{var e;return(e=T.value)==null?void 0:e.confirm()},M=()=>a.value,x=K(()=>{let{minHour:e,maxHour:i,minMinute:r,maxMinute:l,minSecond:g,maxSecond:S}=n;if(n.minTime||n.maxTime){const t={hour:0,minute:0,second:0};n.columnsType.forEach((s,d)=>{var c;t[s]=(c=a.value[d])!=null?c:0});const{hour:m,minute:o}=t;if(n.minTime){const[s,d,c]=h(n.minTime);e=s,r=+m<=+e?d:"00",g=+m<=+e&&+o<=+r?c:"00"}if(n.maxTime){const[s,d,c]=h(n.maxTime);i=s,l=+m>=+i?d:"59",S=+m>=+i&&+o>=+l?c:"59"}}return n.columnsType.map(t=>{const{filter:m,formatter:o}=n;switch(t){case"hour":return v(+e,+i,t,o,m,a.value);case"minute":return v(+r,+l,t,o,m,a.value);case"second":return v(+g,+S,t,o,m,a.value);default:return[]}})});C(a,e=>{P(e,n.modelValue)||f("update:modelValue",e)}),C(()=>n.modelValue,e=>{e=I(e,x.value),P(e,a.value)||(a.value=e)},{immediate:!0});const p=(...e)=>f("change",...e),N=(...e)=>f("cancel",...e),_=(...e)=>f("confirm",...e);return L({confirm:H,getSelectedTime:M}),()=>O(w,U({ref:T,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,columns:x.value,onChange:p,onCancel:N,onConfirm:_},$(n,A)),y)}});const W=q(F);export{W as T};
