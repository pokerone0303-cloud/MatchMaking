import{d as W,r as A,h as R,M as x,Z as Y,y as D,q as s,l as _,e as m,I as q,v as T,x as j,N as I,H as U,C as v,B as G,A as N,P as L,G as n,_ as E,g as P}from"./index-BJHUlza-.js";import"./index-BXTFkF8r.js";import"./index-MS2WRprz.js";import{F as Z}from"./index-DcpnJfoS.js";import{T as J}from"./index-CsriXBrr.js";import{D as K}from"./index-DjKSqjOV.js";import{A as Q}from"./ApplicantCard-F63ywRSl.js";import{u as X}from"./useDialog-BKPbntTB.js";const ee={class:"dialog-title"},te={class:"edit-shift-dialog__content"},ae={class:"edit-shift-dialog__form"},oe={class:"edit-shift-dialog__form-grid"},le={class:"edit-shift-dialog__label"},se={class:"edit-shift-dialog__label"},ie={class:"edit-shift-dialog__label"},ne={class:"edit-shift-dialog__label"},ce={class:"edit-shift-dialog__actions"},re=W({__name:"EditShiftDialog",props:{show:{type:Boolean},shiftData:{default:()=>({workDate:"",startTime:"",endTime:"",position:"",location:"",hourlyWage:0,requiredStaff:0,deadline:""})}},emits:["update:show","update","cancel"],setup(g,{emit:F}){const $=g,p=F,i=A({fields:[{key:"workDate",label:"工作日期",type:"date",placeholder:"請選擇工作日期",width:"full"},{key:"startTime",label:"起始時間",type:"time",placeholder:"請選擇起始時間",width:"half"},{key:"endTime",label:"結束時間",type:"time",placeholder:"請選擇結束時間",width:"half"},{key:"position",label:"職位",type:"text",placeholder:"請輸入職位",width:"full"},{key:"location",label:"地點",type:"text",placeholder:"請輸入地點",width:"full"},{key:"hourlyWage",label:"時薪",type:"number",placeholder:"請輸入時薪",min:0,step:1,width:"half"},{key:"requiredStaff",label:"需求人數",type:"number",placeholder:"請輸入需求人數",min:1,step:1,width:"half"},{key:"deadline",label:"應徵截止時間",type:"date",placeholder:"請選擇截止時間",width:"full"}],values:{}}),u=A({}),y=A({}),f=A({});R(()=>$.shiftData,t=>{t&&(i.value.values={workDate:t.workDate||"",startTime:t.startTime||"",endTime:t.endTime||"",position:t.position||"",location:t.location||"",hourlyWage:t.hourlyWage||0,requiredStaff:t.requiredStaff||0,deadline:t.deadline||""})},{immediate:!0,deep:!0});const V=(t,a)=>!a&&a!==0?t.placeholder||t.label:t.type==="date"?a?new Date(a).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):t.placeholder||"yyyy/月/dd":t.type==="time"?a?a.toString():t.placeholder||"HH:mm":t.type==="number"||t.type==="text"?a.toString():t.placeholder||t.label,w=t=>{const a=i.value.fields.find(l=>l.key===t);if(a){if(a.type==="date"){const l=i.value.values[t];if(l){let o;if(typeof l=="string")if(l.includes("/")){const[h,b,C]=l.split("/");o=new Date(parseInt(h),parseInt(b)-1,parseInt(C))}else l.includes("-")?o=new Date(l):o=new Date(l);else o=new Date(l);isNaN(o.getTime())&&(o=new Date),y.value[t]=[o.getFullYear().toString(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")]}else{const o=new Date;y.value[t]=[o.getFullYear().toString(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")]}}else if(a.type==="time"){const l=i.value.values[t];if(l){const o=l.toString(),[h,b]=o.split(":"),C=parseInt(h)||0,H=parseInt(b)||0;f.value[t]=[Math.max(0,Math.min(23,C)).toString().padStart(2,"0"),Math.max(0,Math.min(59,H)).toString().padStart(2,"0")]}else{const o=new Date;f.value[t]=[o.getHours().toString().padStart(2,"0"),o.getMinutes().toString().padStart(2,"0")]}}u.value[t]=!0}},S=t=>{u.value[t]=!1},M=t=>{const a=y.value[t.key];if(a&&a.length>=3){const[l,o,h]=a,b=`${l}-${o.padStart(2,"0")}-${h.padStart(2,"0")}`;r(t,b)}S(t.key)},z=t=>{const a=f.value[t.key];if(a&&a.length>=2){const[l,o]=a,h=`${l.padStart(2,"0")}:${o.padStart(2,"0")}`;r(t,h)}S(t.key)},r=(t,a)=>{i.value.values[t.key]=a},d=()=>{p("update:show",!1)},k=()=>{p("cancel"),d()},B=()=>{i.value&&i.value.values&&(p("update",i.value.values),d())};return(t,a)=>{const l=q,o=Z,h=G,b=K,C=L,H=J,O=Y;return n(),x(O,{show:g.show,"show-cancel-button":!1,"show-confirm-button":!1,class:"edit-shift-dialog",onClose:d,"onUpdate:show":a[1]||(a[1]=e=>p("update:show",e))},{default:D(()=>[s("div",ee,[m(l,{name:"notes-o",size:"16",color:"black"}),a[2]||(a[2]=s("h3",{class:"dialog-title-text"}," 編輯班別 ",-1)),s("div",{class:"close-button",onClick:a[0]||(a[0]=e=>t.$emit("update:show",!1))},[m(l,{name:"close",size:"16",color:"black"})])]),s("div",te,[s("div",ae,[s("div",oe,[(n(!0),_(T,null,j(i.value.fields,e=>(n(),_(T,{key:e.key},[e.type==="date"?(n(),_("div",{key:0,class:U(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[s("label",le,v(e.label),1),m(o,{"model-value":V(e,i.value.values[e.key]),placeholder:e.placeholder||e.label,readonly:"",onClick:c=>w(e.key),class:"edit-shift-dialog__date-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="time"?(n(),_("div",{key:1,class:U(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[s("label",se,v(e.label),1),m(o,{"model-value":V(e,i.value.values[e.key]),placeholder:e.placeholder||e.label,readonly:"",onClick:c=>w(e.key),class:"edit-shift-dialog__time-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="number"?(n(),_("div",{key:2,class:U(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[s("label",ie,v(e.label),1),m(o,{"model-value":i.value.values[e.key],type:"number",placeholder:e.placeholder||e.label,min:e.min,max:e.max,step:e.step,"onUpdate:modelValue":c=>r(e,c),class:"edit-shift-dialog__number-input"},null,8,["model-value","placeholder","min","max","step","onUpdate:modelValue"])],2)):e.type==="text"?(n(),_("div",{key:3,class:U(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[s("label",ne,v(e.label),1),m(o,{"model-value":i.value.values[e.key],type:"text",placeholder:e.placeholder||e.label,"onUpdate:modelValue":c=>r(e,c),class:"edit-shift-dialog__text-input"},null,8,["model-value","placeholder","onUpdate:modelValue"])],2)):I("",!0)],64))),128))])]),s("div",ce,[m(h,{type:"primary",size:"small",class:"edit-shift-dialog__update-btn",onClick:B},{default:D(()=>[...a[3]||(a[3]=[N(" 更新 ",-1)])]),_:1}),m(h,{type:"default",size:"small",class:"edit-shift-dialog__cancel-btn",onClick:k},{default:D(()=>[...a[4]||(a[4]=[N(" 取消 ",-1)])]),_:1})])]),(n(!0),_(T,null,j(i.value.fields,e=>(n(),_(T,{key:`picker-${e.key}`},[e.type==="date"?(n(),x(C,{key:0,show:u.value[e.key],"onUpdate:show":c=>u.value[e.key]=c,position:"bottom","destroy-on-close":"",round:""},{default:D(()=>[m(b,{modelValue:y.value[e.key],"onUpdate:modelValue":c=>y.value[e.key]=c,onConfirm:()=>M(e),onCancel:()=>S(e.key)},null,8,["modelValue","onUpdate:modelValue","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):I("",!0),e.type==="time"?(n(),x(C,{key:1,show:u.value[e.key],"onUpdate:show":c=>u.value[e.key]=c,position:"bottom","destroy-on-close":"",round:""},{default:D(()=>[m(H,{modelValue:f.value[e.key],"onUpdate:modelValue":c=>f.value[e.key]=c,onConfirm:()=>z(e),onCancel:()=>S(e.key)},null,8,["modelValue","onUpdate:modelValue","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):I("",!0)],64))),128))]),_:1},8,["show"])}}}),xe=E(re,[["__scopeId","data-v-b1333682"]]),de={class:"applicant-list-dialog"},pe={class:"applicant-list-dialog__header"},ue={class:"applicant-list-dialog__info"},me={class:"applicant-list-dialog__info-content"},he={class:"applicant-list-dialog__date-time"},_e={class:"applicant-list-dialog__position"},ve={class:"applicant-list-dialog__count"},ge={class:"applicant-list-dialog__content"},ye=W({__name:"ApplicantListDialog",props:{visible:{type:Boolean},shift:{default:null}},emits:["update:visible","close","accept","reject"],setup(g,{emit:F}){const{showSuccess:$}=X(),p=g,i=F,u=P(()=>p.shift?[{id:"1",name:"張小明",position:"桌邊荷官",shiftDate:"2024-09-15",startTime:"18:00",endTime:"23:00",experience:3,rating:4.8,skills:["百家樂","21點","輪盤"],workAreas:["台北市","新北市"],phone:"0912-345-678",email:"ming@example.com",applicationTime:"2024-09-10 15:30",totalHours:120,joinDate:"2024-01-01",lastActivity:"2024-09-14",status:"pending"},{id:"2",name:"李美華",position:"桌邊荷官",shiftDate:"2024-09-15",startTime:"18:00",endTime:"23:00",experience:5,rating:4.9,skills:["百家樂","德州撲克"],workAreas:["台北市"],phone:"0987-654-321",email:"hua@example.com",applicationTime:"2024-09-10 16:45",totalHours:250,joinDate:"2023-06-01",lastActivity:"2024-09-15",status:"accepted"},{id:"3",name:"王大偉",position:"桌邊荷官",shiftDate:"2024-09-15",startTime:"18:00",endTime:"23:00",experience:2,rating:4.5,skills:["21點","輪盤"],workAreas:["新北市"],phone:"0923-456-789",email:"david@example.com",applicationTime:"2024-09-11 09:20",totalHours:80,joinDate:"2024-03-01",lastActivity:"2024-09-13",status:"accepted"}]:[]),y=P(()=>p.shift?new Date(p.shift.date).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"}):""),f=P(()=>p.shift?`${p.shift.startTime}-${p.shift.endTime}`:""),V=P(()=>`${u.value.length}/10`),w=()=>{i("update:visible",!1),i("close")},S=()=>{w()},M=async r=>{if(r){const d=u.value.find(k=>k.id===r);d&&(d.status="accepted",await $("已錄取應徵者"))}},z=async r=>{if(r){const d=u.value.find(k=>k.id===r);d&&(d.status="rejected",await $("已拒絕應徵者"))}};return(r,d)=>{const k=q,B=L;return n(),x(B,{show:g.visible,position:"center",style:{width:"90dvw",height:"90dvh",maxWidth:"768px"},round:"",closeable:"","close-icon-position":"top-right",onClose:w,onClickOverlay:S},{default:D(()=>[s("div",de,[s("div",pe,[d[0]||(d[0]=s("h2",{class:"applicant-list-dialog__title"},"應徵名單",-1)),s("div",{class:"close-button",onClick:w},[m(k,{name:"close",size:"16",color:"black"})])]),s("div",ue,[s("div",me,[s("div",he,v(y.value)+" · "+v(f.value),1),s("div",_e,v(g.shift?.title)+" · "+v(g.shift?.location),1),s("div",ve,"應徵人數 : "+v(V.value),1)])]),s("div",ge,[(n(!0),_(T,null,j(u.value,t=>(n(),x(Q,{key:t.id,applicant:t,onAccept:M,onReject:z},null,8,["applicant"]))),128))])])]),_:1},8,["show"])}}}),$e=E(ye,[["__scopeId","data-v-b0c5b40a"]]);export{$e as A,xe as E};
