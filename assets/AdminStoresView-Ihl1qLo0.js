import{d as M,l as h,q as e,H as A,C as i,v as $,x as V,A as C,s as L,G as u,_ as R,g as N,r as k,h as W,M as O,y as U,Z as X,e as b,I as Y,N as q,z as ee,B as te,P as se,Q as ae}from"./index-BJHUlza-.js";import"./index-BXTFkF8r.js";import"./index-MS2WRprz.js";import{F as oe}from"./index-DcpnJfoS.js";import{P as le}from"./index-DjKSqjOV.js";import{F as ne}from"./FilterHeader-CrVf3pjn.js";import{u as ie}from"./useDialog-BKPbntTB.js";import"./index-CnYOSKJm.js";import"./index-COjHXFXs.js";const ce={class:"store-card"},de={class:"store-card__header"},re={class:"store-card__logo"},ue={class:"store-card__logo-placeholder"},_e={class:"store-card__basic-info"},ve={class:"store-card__name"},he={class:"store-card__id"},pe={class:"store-card__position-info"},me={class:"store-card__position"},ge={class:"store-card__manager"},ye={class:"store-card__contact-summary"},fe={class:"store-card__email"},be={class:"store-card__phone"},ke={class:"store-card__address-section"},xe={class:"store-card__address-value"},we={class:"store-card__operation-info"},Ce={class:"store-card__tax-section"},Se={class:"store-card__tax-value"},$e={class:"store-card__location-count"},Te={class:"store-card__locations-section"},Ie={class:"store-card__locations-list"},Ae={class:"store-card__statistics"},Ve={class:"store-card__statistics-item"},Be={class:"store-card__statistics-value store-card__statistics-value--blue"},Ee={class:"store-card__statistics-item"},Fe={class:"store-card__statistics-value store-card__statistics-value--green"},De={class:"store-card__statistics-item"},Ue={class:"store-card__statistics-value store-card__statistics-value--orange"},je={class:"store-card__actions"},Pe={class:"store-card__btn-icon"},ze=M({__name:"StoresCard",props:{store:{}},emits:["edit","toggleStatus","suspend"],setup(c,{emit:S}){const p=c,m=S,g={active:{text:"å•Ÿç”¨",class:"store-card__status-tag--active"},inactive:{text:"åœç”¨",class:"store-card__status-tag--inactive"},suspended:{text:"åœæ¬Š",class:"store-card__status-tag--suspended"}},x=y=>new Date(y).toLocaleDateString("zh-TW",{year:"numeric",month:"numeric",day:"numeric"}),n=()=>{m("edit",p.store.id)},w=async()=>{const y=p.store.status==="active",l=y?"åœç”¨":"å•Ÿç”¨";try{await L({title:`ç¢ºèª${l}`,message:`ç¢ºå®šè¦${l} ${p.store.name} çš„å¸³è™Ÿå—Žï¼Ÿ`,confirmButtonText:`ç¢ºèª${l}`,cancelButtonText:"å–æ¶ˆ",confirmButtonColor:y?"#F2994A":"#27AE60"}),m("toggleStatus",p.store.id)}catch{}},f=async()=>{try{await L({title:"ç¢ºèªåœæ¬Š",message:`ç¢ºå®šè¦åœæ¬Š ${p.store.name} çš„å¸³è™Ÿå—Žï¼Ÿ`,confirmButtonText:"ç¢ºèªåœæ¬Š",cancelButtonText:"å–æ¶ˆ",confirmButtonColor:"#EB5757"}),m("suspend",p.store.id)}catch{}};return(y,l)=>(u(),h("div",ce,[e("div",{class:A(["store-card__status-tag",g[c.store.status].class])},i(g[c.store.status].text),3),e("div",de,[e("div",re,[e("div",ue,i(c.store.name.charAt(0)),1)]),e("div",_e,[e("h3",ve,i(c.store.name),1),e("p",he,"ID: "+i(c.store.id),1),e("div",pe,[e("span",me,i(c.store.code),1),l[0]||(l[0]=e("span",{class:"store-card__separator"},"â€¢",-1)),e("span",ge,i(c.store.manager),1)]),e("div",ye,[e("span",fe,i(c.store.email),1),l[1]||(l[1]=e("span",{class:"store-card__separator"},"â€¢",-1)),e("span",be,i(c.store.phone),1)])])]),e("div",ke,[l[2]||(l[2]=e("div",{class:"store-card__address-title"},"å…¬å¸åœ°å€",-1)),e("div",xe,i(c.store.address),1)]),e("div",we,[e("div",Ce,[l[3]||(l[3]=e("div",{class:"store-card__tax-title"},"çµ±ç·¨",-1)),e("div",Se,i(c.store.taxId),1)]),e("div",$e," æ“šé»žæ•¸ï¼š"+i(c.store.locationCount),1)]),e("div",Te,[l[5]||(l[5]=e("div",{class:"store-card__locations-title"},"ç‡Ÿæ¥­æ“šé»ž",-1)),e("div",Ie,[(u(!0),h($,null,V(c.store.locations,T=>(u(),h("span",{key:T,class:"store-card__location-tag"},[l[4]||(l[4]=e("span",{class:"store-card__location-icon"},"ðŸ¢",-1)),C(" "+i(T),1)]))),128))])]),e("div",Ae,[e("div",Ve,[e("span",Be,i(c.store.publishedShifts),1),l[6]||(l[6]=e("span",{class:"store-card__statistics-label"},"ç™¼å¸ƒç­åˆ¥",-1))]),e("div",Ee,[e("span",Fe,i(c.store.successfulHires),1),l[7]||(l[7]=e("span",{class:"store-card__statistics-label"},"æˆåŠŸéŒ„å–",-1))]),e("div",De,[e("span",Ue,i(x(c.store.joinDate)),1),l[8]||(l[8]=e("span",{class:"store-card__statistics-label"},"åŠ å…¥æ—¥æœŸ",-1))])]),e("div",je,[e("button",{class:"store-card__btn store-card__btn--edit",onClick:n},[...l[9]||(l[9]=[e("span",{class:"store-card__btn-icon"},"âœ",-1),C(" ç·¨è¼¯ ",-1)])]),e("button",{class:A(["store-card__btn store-card__btn--toggle-status",c.store.status==="active"?"store-card__btn--disable":"store-card__btn--enable"]),onClick:w},[e("span",Pe,i(c.store.status==="active"?"â¸":"â–¶"),1),C(" "+i(c.store.status==="active"?"åœç”¨":"å•Ÿç”¨"),1)],2),e("button",{class:"store-card__btn store-card__btn--suspend",onClick:f},[...l[10]||(l[10]=[e("span",{class:"store-card__btn-icon"},"âš ",-1),C(" åœæ¬Š ",-1)])])])]))}}),Ze=R(ze,[["__scopeId","data-v-70a57031"]]),He={class:"dialog-title"},Ne={class:"dialog-title-text"},Oe={class:"edit-store-dialog__content"},Me={class:"edit-store-dialog__form"},Re={class:"edit-store-dialog__form-grid"},Ke={class:"edit-store-dialog__label"},Le={class:"edit-store-dialog__label"},qe={class:"edit-store-dialog__tags-container"},Ge={class:"edit-store-dialog__tags-list"},Je={class:"edit-store-dialog__tag-input-container"},Qe=["onClick"],We={class:"edit-store-dialog__label"},Xe={class:"edit-store-dialog__actions"},Ye=M({__name:"EditStoresDialog",props:{show:{type:Boolean},storeData:{default:void 0}},emits:["update:show","save","cancel"],setup(c,{emit:S}){const p=c,m=S,g=N(()=>n.value.fields.filter(t=>t.type==="select")),x=N(()=>!!p.storeData),n=k({fields:[{key:"name",label:"å•†å®¶åç¨±",type:"text",placeholder:"è«‹è¼¸å…¥å•†å®¶åç¨±",width:"half"},{key:"code",label:"å•†å®¶ç·¨è™Ÿ",type:"text",placeholder:"è«‹è¼¸å…¥å•†å®¶ç·¨è™Ÿ",width:"half"},{key:"manager",label:"ç¶“ç†å§“å",type:"text",placeholder:"è«‹è¼¸å…¥ç¶“ç†å§“å",width:"half"},{key:"email",label:"é›»å­éƒµä»¶",type:"text",placeholder:"è«‹è¼¸å…¥é›»å­éƒµä»¶",width:"half"},{key:"phone",label:"é›»è©±è™Ÿç¢¼",type:"text",placeholder:"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼",width:"half"},{key:"address",label:"å…¬å¸åœ°å€",type:"text",placeholder:"è«‹è¼¸å…¥å…¬å¸åœ°å€",width:"full"},{key:"taxId",label:"çµ±ç·¨",type:"text",placeholder:"è«‹è¼¸å…¥çµ±ç·¨",width:"half"},{key:"locations",label:"ç‡Ÿæ¥­æ“šé»ž",type:"tags",placeholder:"è¼¸å…¥æ“šé»žåç¨±",width:"full"},{key:"status",label:"ç‹€æ…‹",type:"select",placeholder:"é¸æ“‡ç‹€æ…‹",options:["active","inactive","suspended"],width:"full"}],values:{}}),w=k({}),f=k({}),y=k({}),l=k({});W(()=>p.storeData,t=>{t?n.value.values={name:t.name||"",code:t.code||"",manager:t.manager||"",email:t.email||"",phone:t.phone||"",address:t.address||"",taxId:t.taxId||"",locations:[...t.locations||[]],status:t.status||"active"}:n.value.values={name:"",code:"",manager:"",email:"",phone:"",address:"",taxId:"",locations:[],status:"active"},n.value.fields.forEach(s=>{s.type==="tags"&&(y.value[s.key]="")})},{immediate:!0,deep:!0});const T=t=>t.type==="select"&&t.options?t.options.map(s=>({text:B(s),value:s})):[],B=t=>({active:"å•Ÿç”¨",inactive:"åœç”¨",suspended:"åœæ¬Š"})[t]||t,j=(t,s)=>!s&&s!==""?t.placeholder||t.label:t.type==="select"?B(s):t.type==="tags"?Array.isArray(s)?s.join(", "):"":s.toString(),P=t=>{const s=n.value.fields.find(_=>_.key===t);if(s){if(s.type==="select"){const _=n.value.values[t];f.value[t]=[Array.isArray(_)?_[0]:_]}w.value[t]=!0}},E=t=>{w.value[t]=!1},z=t=>{const s=f.value[t.key];s&&s.length>0&&F(t,s[0]),E(t.key)},F=(t,s)=>{n.value.values[t.key]=s},D=t=>{const s=y.value[t];if(s&&s.trim()){const _=n.value.values[t];_.includes(s.trim())||_.push(s.trim()),y.value[t]=""}},Z=(t,s)=>{s&&(l.value[t]=s)},H=(t,s)=>{const _=n.value.values[t],I=_.indexOf(s);I>-1&&_.splice(I,1)},o=()=>{m("update:show",!1)},d=()=>{m("cancel"),o()},r=()=>{if(n.value&&n.value.values){const t={name:n.value.values.name,code:n.value.values.code,manager:n.value.values.manager,email:n.value.values.email,phone:n.value.values.phone,address:n.value.values.address,taxId:n.value.values.taxId,locations:n.value.values.locations,status:n.value.values.status};m("save",t),o()}};return(t,s)=>{const _=Y,I=oe,K=te,G=le,J=se,Q=X;return u(),O(Q,{show:c.show,"show-cancel-button":!1,"show-confirm-button":!1,class:"edit-store-dialog",onClose:o,"onUpdate:show":s[1]||(s[1]=a=>m("update:show",a)),"close-on-click-overlay":!0},{default:U(()=>[e("div",He,[b(_,{name:"shop-o",size:"16",color:"black"}),e("h3",Ne,i(x.value?"ç·¨è¼¯å•†å®¶":"æ–°å¢žå•†å®¶"),1),e("div",{class:"close-button",onClick:s[0]||(s[0]=a=>t.$emit("update:show",!1))},[b(_,{name:"close",size:"16",color:"black"})])]),e("div",Oe,[e("div",Me,[e("div",Re,[(u(!0),h($,null,V(n.value.fields,a=>(u(),h($,{key:a.key},[a.type==="text"?(u(),h("div",{key:0,class:A(["edit-store-dialog__form-item",`edit-store-dialog__form-item--${a.width||"half"}`])},[e("label",Ke,i(a.label),1),b(I,{"model-value":n.value.values[a.key],type:"text",placeholder:a.placeholder||a.label,"onUpdate:modelValue":v=>F(a,v),class:"edit-store-dialog__text-input"},null,8,["model-value","placeholder","onUpdate:modelValue"])],2)):a.type==="tags"?(u(),h("div",{key:1,class:A(["edit-store-dialog__form-item",`edit-store-dialog__form-item--${a.width||"full"}`])},[e("label",Le,i(a.label),1),e("div",qe,[e("div",Ge,[(u(!0),h($,null,V(n.value.values[a.key],v=>(u(),h("span",{key:v,class:"edit-store-dialog__tag"},[C(i(v)+" ",1),b(_,{name:"cross",size:"12",onClick:ct=>H(a.key,v)},null,8,["onClick"])]))),128))]),e("div",Je,[b(I,{modelValue:y.value[a.key],"onUpdate:modelValue":v=>y.value[a.key]=v,type:"text",placeholder:a.placeholder||"è¼¸å…¥æ¨™ç±¤",onKeyup:ee(v=>D(a.key),["enter"]),class:"edit-store-dialog__tag-input",ref_for:!0,ref:v=>Z(a.key,v)},null,8,["modelValue","onUpdate:modelValue","placeholder","onKeyup"]),e("button",{class:"edit-store-dialog__add-tag-btn",onClick:v=>D(a.key)},[b(_,{name:"plus",size:"12"}),s[2]||(s[2]=C(" æ–°å¢ž ",-1))],8,Qe)])])],2)):a.type==="select"?(u(),h("div",{key:2,class:A(["edit-store-dialog__form-item",`edit-store-dialog__form-item--${a.width||"half"}`])},[e("label",We,i(a.label),1),b(I,{"model-value":j(a,n.value.values[a.key]),placeholder:a.placeholder||a.label,readonly:"",onClick:v=>P(a.key),class:"edit-store-dialog__select-input"},null,8,["model-value","placeholder","onClick"])],2)):q("",!0)],64))),128))])]),e("div",Xe,[b(K,{type:"primary",size:"small",class:"edit-store-dialog__save-btn",onClick:r},{default:U(()=>[C(i(x.value?"æ›´æ–°":"æ–°å¢ž"),1)]),_:1}),b(K,{type:"default",size:"small",class:"edit-store-dialog__cancel-btn",onClick:d},{default:U(()=>[...s[3]||(s[3]=[C(" å–æ¶ˆ ",-1)])]),_:1})])]),(u(!0),h($,null,V(g.value,a=>(u(),O(J,{key:`select-picker-${a.key}`,show:w.value[a.key],"onUpdate:show":v=>w.value[a.key]=v,position:"bottom","destroy-on-close":"",round:""},{default:U(()=>[b(G,{modelValue:f.value[a.key],"onUpdate:modelValue":v=>f.value[a.key]=v,columns:T(a),onConfirm:()=>z(a),onCancel:()=>E(a.key)},null,8,["modelValue","onUpdate:modelValue","columns","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"]))),128))]),_:1},8,["show"])}}}),et=R(Ye,[["__scopeId","data-v-77db85d8"]]),tt={class:"admin-stores"},st={class:"content-container"},at={class:"status-filter-buttons"},ot=["onClick"],lt={key:0,class:"count-badge"},nt={class:"stores-list"},it=M({name:"AdminStoresView",__name:"AdminStoresView",setup(c){const{showSuccess:S}=ie(),p=k(!1),m=k(void 0),g=k([{id:"1",name:"è±ªè¯è³­å ´",code:"#E001",manager:"çŽ‹ç¶“ç†",email:"hr@luxurycasino.com",phone:"02-2345-6789",address:"å°åŒ—å¸‚ä¿¡ç¾©å€ä¿¡ç¾©è·¯äº”æ®µ7è™Ÿ",taxId:"12345678",locationCount:2,locations:["å°åŒ—ä¿¡ç¾©åº—","å°åŒ—ä¸­å±±åº—"],publishedShifts:156,successfulHires:89,joinDate:"2023-01-10",status:"active",createdAt:"2023-01-10T00:00:00Z",updatedAt:"2024-09-15T00:00:00Z"},{id:"2",name:"çš‡å®¶å¨›æ¨‚åŸŽ",code:"#E002",manager:"æŽç¸½ç›£",email:"contact@royalcasino.com",phone:"02-3456-7890",address:"å°åŒ—å¸‚ä¸­å±±å€å—äº¬æ±è·¯äºŒæ®µ100è™Ÿ",taxId:"87654321",locationCount:3,locations:["å°åŒ—ç¸½åº—","æ–°åŒ—æ¿æ©‹åº—","æ¡ƒåœ’ä¸­å£¢åº—"],publishedShifts:203,successfulHires:142,joinDate:"2022-11-15",status:"active",createdAt:"2022-11-15T00:00:00Z",updatedAt:"2024-09-14T00:00:00Z"},{id:"3",name:"é‡‘å…¸å¨›æ¨‚",code:"#E003",manager:"é™³ä¸»ä»»",email:"info@goldenentertainment.com",phone:"04-1234-5678",address:"å°ä¸­å¸‚è¥¿å€å°ç£å¤§é“äºŒæ®µ285è™Ÿ",taxId:"11223344",locationCount:1,locations:["å°ä¸­æ——è‰¦åº—"],publishedShifts:89,successfulHires:67,joinDate:"2023-06-20",status:"inactive",createdAt:"2023-06-20T00:00:00Z",updatedAt:"2024-09-12T00:00:00Z"},{id:"4",name:"å—æ–¹å¨›æ¨‚",code:"#E004",manager:"å¼µå‰¯ç¸½",email:"admin@southernent.com",phone:"07-9876-5432",address:"é«˜é›„å¸‚å‰é‡‘å€ä¸­æ­£å››è·¯211è™Ÿ",taxId:"55667788",locationCount:2,locations:["é«˜é›„ç¸½åº—","å°å—åˆ†åº—"],publishedShifts:134,successfulHires:98,joinDate:"2023-03-08",status:"suspended",createdAt:"2023-03-08T00:00:00Z",updatedAt:"2024-09-10T00:00:00Z"}]),x=k("all"),n=k([{label:"å…¨éƒ¨",value:"all"},{label:"å•Ÿç”¨",value:"active"},{label:"åœç”¨",value:"inactive"},{label:"åœæ¬Š",value:"suspended"}]),w=k({all:0,active:0,inactive:0,suspended:0}),f=k({fields:[{type:"search",key:"search",label:"æœå°‹",placeholder:"æœå°‹å•†å®¶åç¨±/ç·¨è™Ÿ",width:"full"},{type:"select",key:"status",label:"ç‹€æ…‹",placeholder:"é¸æ“‡ç‹€æ…‹",width:"half",options:[{text:"å…¨éƒ¨ç‹€æ…‹",value:"all"},{text:"å•Ÿç”¨",value:"active"},{text:"åœç”¨",value:"inactive"},{text:"åœæ¬Š",value:"suspended"}]},{type:"select",key:"location",label:"æ“šé»ž",placeholder:"é¸æ“‡æ“šé»ž",width:"half",options:[{text:"å…¨éƒ¨æ“šé»ž",value:"all"},{text:"å°åŒ—",value:"taipei"},{text:"å°ä¸­",value:"taichung"},{text:"é«˜é›„",value:"kaohsiung"}]},{type:"date",key:"joinDate",label:"åŠ å…¥æ—¥æœŸ",placeholder:"é¸æ“‡æ—¥æœŸ",width:"half"},{type:"select",key:"sortBy",label:"æŽ’åº",placeholder:"é¸æ“‡æŽ’åºæ–¹å¼",width:"half",options:[{text:"æœ€æ–°åˆ°æœ€èˆŠ",value:"newest"},{text:"æœ€èˆŠåˆ°æœ€æ–°",value:"oldest"},{text:"ç™¼å¸ƒç­åˆ¥å¤šåˆ°å°‘",value:"shifts_high"},{text:"ç™¼å¸ƒç­åˆ¥å°‘åˆ°å¤š",value:"shifts_low"}]}],values:{search:"",status:"all",location:"all",joinDate:"",sortBy:"newest"}}),y=()=>{const o={all:g.value.length,active:0,inactive:0,suspended:0};g.value.forEach(d=>{switch(d.status){case"active":o.active++;break;case"inactive":o.inactive++;break;case"suspended":o.suspended++;break}}),w.value=o},l=o=>{x.value=o},T=N(()=>x.value==="all"?g.value:g.value.filter(o=>o.status===x.value)),B=(o,d)=>{f.value={...f.value,values:{...f.value.values,[o]:d}}},j=o=>{console.log("æœå°‹:",o)},P=()=>{console.log("åˆ‡æ›ç¯©é¸é¸å–®")},E=()=>{f.value.values={search:"",status:"all",location:"all",joinDate:"",sortBy:"newest"},x.value="all"},z=()=>{m.value=void 0,p.value=!0},F=o=>{const d=g.value.find(r=>r.id===o);d&&(m.value={...d},p.value=!0)},D=o=>{if(m.value){const d=g.value.findIndex(r=>r.id===m.value.id);d>-1&&(g.value[d]={...g.value[d],...o},S("å•†å®¶è³‡æ–™å·²æ›´æ–°"))}else{const d={id:Date.now().toString(),name:o.name||"",code:o.code||"",manager:o.manager||"",email:o.email||"",phone:o.phone||"",address:o.address||"",taxId:o.taxId||"",locationCount:o.locations?.length||0,locations:o.locations||[],publishedShifts:0,successfulHires:0,joinDate:new Date().toISOString().split("T")[0],status:o.status||"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g.value.unshift(d),S("æ–°å•†å®¶å·²æ–°å¢ž")}y()},Z=()=>{m.value=void 0,p.value=!1},H=async o=>{const d=g.value.find(s=>s.id===o);if(!d)return;const r=d.status==="active",t=r?"åœç”¨":"å•Ÿç”¨";d.status=r?"inactive":"active",await S(`å·²${t}å•†å®¶`),y()};return ae(()=>{y()}),(o,d)=>(u(),h("div",tt,[b(ne,{title:"å•†å®¶ç®¡ç†","filter-config":f.value,sticky:!0,"show-title":!1,"show-add-button":!0,"add-button-text":"æ–°å¢ž",onUpdateFilter:B,onSearch:j,onToggleFilter:P,onReset:E,onAdd:z},null,8,["filter-config"]),e("div",st,[e("div",at,[(u(!0),h($,null,V(n.value,r=>(u(),h("button",{key:r.value,onClick:t=>l(r.value),class:A([{active:x.value===r.value,[`status-btn--${r.value}`]:!0},"status-btn"])},[C(i(r.label)+" ",1),w.value[r.value]>0?(u(),h("span",lt," ("+i(w.value[r.value])+") ",1)):q("",!0)],10,ot))),128))]),e("div",nt,[(u(!0),h($,null,V(T.value,r=>(u(),O(Ze,{key:r.id,store:r,onEdit:F,onToggleStatus:H},null,8,["store"]))),128))])]),b(et,{show:p.value,"store-data":m.value,onSave:D,onCancel:Z,"onUpdate:show":d[0]||(d[0]=r=>p.value=r)},null,8,["show","store-data"])]))}}),yt=R(it,[["__scopeId","data-v-dd666544"]]);export{yt as default};
