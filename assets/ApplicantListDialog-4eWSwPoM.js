import{d as W,r as U,h as R,M as $,Z as Y,y as D,q as i,l as u,e as c,I as q,v as x,x as j,N as H,H as P,C as m,B as G,A as N,P as L,G as n,_ as E,g as I}from"./index-D9wYTDFn.js";import"./index-i73DBHhS.js";import"./index-BCIUGFk7.js";import{F as Z}from"./index-tX8Cw9F2.js";import{T as J}from"./index-90F6XO_9.js";import{D as K}from"./index-Cxlnchgb.js";import{A as Q}from"./ApplicantCard-Defg49VX.js";const X={class:"dialog-title"},ee={class:"edit-shift-dialog__content"},te={class:"edit-shift-dialog__form"},ae={class:"edit-shift-dialog__form-grid"},oe={class:"edit-shift-dialog__label"},le={class:"edit-shift-dialog__label"},ie={class:"edit-shift-dialog__label"},se={class:"edit-shift-dialog__label"},ne={class:"edit-shift-dialog__actions"},re=W({__name:"EditShiftDialog",props:{show:{type:Boolean},shiftData:{default:()=>({workDate:"",startTime:"",endTime:"",position:"",location:"",hourlyWage:0,requiredStaff:0,deadline:""})}},emits:["update:show","update","cancel"],setup(v,{emit:F}){const h=v,p=F,s=U({fields:[{key:"workDate",label:"工作日期",type:"date",placeholder:"請選擇工作日期",width:"full"},{key:"startTime",label:"起始時間",type:"time",placeholder:"請選擇起始時間",width:"half"},{key:"endTime",label:"結束時間",type:"time",placeholder:"請選擇結束時間",width:"half"},{key:"position",label:"職位",type:"text",placeholder:"請輸入職位",width:"full"},{key:"location",label:"地點",type:"text",placeholder:"請輸入地點",width:"full"},{key:"hourlyWage",label:"時薪",type:"number",placeholder:"請輸入時薪",min:0,step:1,width:"half"},{key:"requiredStaff",label:"需求人數",type:"number",placeholder:"請輸入需求人數",min:1,step:1,width:"half"},{key:"deadline",label:"應徵截止時間",type:"date",placeholder:"請選擇截止時間",width:"full"}],values:{}}),_=U({}),g=U({}),y=U({});R(()=>h.shiftData,t=>{t&&(s.value.values={workDate:t.workDate||"",startTime:t.startTime||"",endTime:t.endTime||"",position:t.position||"",location:t.location||"",hourlyWage:t.hourlyWage||0,requiredStaff:t.requiredStaff||0,deadline:t.deadline||""})},{immediate:!0,deep:!0});const w=(t,a)=>!a&&a!==0?t.placeholder||t.label:t.type==="date"?a?new Date(a).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):t.placeholder||"yyyy/月/dd":t.type==="time"?a?a.toString():t.placeholder||"HH:mm":t.type==="number"||t.type==="text"?a.toString():t.placeholder||t.label,V=t=>{const a=s.value.fields.find(l=>l.key===t);if(a){if(a.type==="date"){const l=s.value.values[t];if(l){let o;if(typeof l=="string")if(l.includes("/")){const[d,b,C]=l.split("/");o=new Date(parseInt(d),parseInt(b)-1,parseInt(C))}else l.includes("-")?o=new Date(l):o=new Date(l);else o=new Date(l);isNaN(o.getTime())&&(o=new Date),g.value[t]=[o.getFullYear().toString(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")]}else{const o=new Date;g.value[t]=[o.getFullYear().toString(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")]}}else if(a.type==="time"){const l=s.value.values[t];if(l){const o=l.toString(),[d,b]=o.split(":"),C=parseInt(d)||0,B=parseInt(b)||0;y.value[t]=[Math.max(0,Math.min(23,C)).toString().padStart(2,"0"),Math.max(0,Math.min(59,B)).toString().padStart(2,"0")]}else{const o=new Date;y.value[t]=[o.getHours().toString().padStart(2,"0"),o.getMinutes().toString().padStart(2,"0")]}}_.value[t]=!0}},S=t=>{_.value[t]=!1},M=t=>{const a=g.value[t.key];if(a&&a.length>=3){const[l,o,d]=a,b=`${l}-${o.padStart(2,"0")}-${d.padStart(2,"0")}`;k(t,b)}S(t.key)},f=t=>{const a=y.value[t.key];if(a&&a.length>=2){const[l,o]=a,d=`${l.padStart(2,"0")}:${o.padStart(2,"0")}`;k(t,d)}S(t.key)},k=(t,a)=>{s.value.values[t.key]=a},T=()=>{p("update:show",!1)},z=()=>{p("cancel"),T()},A=()=>{s.value&&s.value.values&&(p("update",s.value.values),T())};return(t,a)=>{const l=q,o=Z,d=G,b=K,C=L,B=J,O=Y;return n(),$(O,{show:v.show,"show-cancel-button":!1,"show-confirm-button":!1,class:"edit-shift-dialog",onClose:T,"onUpdate:show":a[1]||(a[1]=e=>p("update:show",e))},{default:D(()=>[i("div",X,[c(l,{name:"notes-o",size:"16",color:"black"}),a[2]||(a[2]=i("h3",{class:"dialog-title-text"}," 編輯班別 ",-1)),i("div",{class:"close-button",onClick:a[0]||(a[0]=e=>t.$emit("update:show",!1))},[c(l,{name:"close",size:"16",color:"black"})])]),i("div",ee,[i("div",te,[i("div",ae,[(n(!0),u(x,null,j(s.value.fields,e=>(n(),u(x,{key:e.key},[e.type==="date"?(n(),u("div",{key:0,class:P(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[i("label",oe,m(e.label),1),c(o,{"model-value":w(e,s.value.values[e.key]),placeholder:e.placeholder||e.label,readonly:"",onClick:r=>V(e.key),class:"edit-shift-dialog__date-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="time"?(n(),u("div",{key:1,class:P(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[i("label",le,m(e.label),1),c(o,{"model-value":w(e,s.value.values[e.key]),placeholder:e.placeholder||e.label,readonly:"",onClick:r=>V(e.key),class:"edit-shift-dialog__time-input"},null,8,["model-value","placeholder","onClick"])],2)):e.type==="number"?(n(),u("div",{key:2,class:P(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[i("label",ie,m(e.label),1),c(o,{"model-value":s.value.values[e.key],type:"number",placeholder:e.placeholder||e.label,min:e.min,max:e.max,step:e.step,"onUpdate:modelValue":r=>k(e,r),class:"edit-shift-dialog__number-input"},null,8,["model-value","placeholder","min","max","step","onUpdate:modelValue"])],2)):e.type==="text"?(n(),u("div",{key:3,class:P(["edit-shift-dialog__form-item",`edit-shift-dialog__form-item--${e.width||"half"}`])},[i("label",se,m(e.label),1),c(o,{"model-value":s.value.values[e.key],type:"text",placeholder:e.placeholder||e.label,"onUpdate:modelValue":r=>k(e,r),class:"edit-shift-dialog__text-input"},null,8,["model-value","placeholder","onUpdate:modelValue"])],2)):H("",!0)],64))),128))])]),i("div",ne,[c(d,{type:"primary",size:"small",class:"edit-shift-dialog__update-btn",onClick:A},{default:D(()=>[...a[3]||(a[3]=[N(" 更新 ",-1)])]),_:1}),c(d,{type:"default",size:"small",class:"edit-shift-dialog__cancel-btn",onClick:z},{default:D(()=>[...a[4]||(a[4]=[N(" 取消 ",-1)])]),_:1})])]),(n(!0),u(x,null,j(s.value.fields,e=>(n(),u(x,{key:`picker-${e.key}`},[e.type==="date"?(n(),$(C,{key:0,show:_.value[e.key],"onUpdate:show":r=>_.value[e.key]=r,position:"bottom","destroy-on-close":"",round:""},{default:D(()=>[c(b,{modelValue:g.value[e.key],"onUpdate:modelValue":r=>g.value[e.key]=r,onConfirm:()=>M(e),onCancel:()=>S(e.key)},null,8,["modelValue","onUpdate:modelValue","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):H("",!0),e.type==="time"?(n(),$(C,{key:1,show:_.value[e.key],"onUpdate:show":r=>_.value[e.key]=r,position:"bottom","destroy-on-close":"",round:""},{default:D(()=>[c(B,{modelValue:y.value[e.key],"onUpdate:modelValue":r=>y.value[e.key]=r,onConfirm:()=>f(e),onCancel:()=>S(e.key)},null,8,["modelValue","onUpdate:modelValue","onConfirm","onCancel"])]),_:2},1032,["show","onUpdate:show"])):H("",!0)],64))),128))]),_:1},8,["show"])}}}),De=E(re,[["__scopeId","data-v-b1333682"]]),ce={class:"applicant-list-dialog"},de={class:"applicant-list-dialog__header"},pe={class:"applicant-list-dialog__info"},ue={class:"applicant-list-dialog__info-content"},me={class:"applicant-list-dialog__date-time"},he={class:"applicant-list-dialog__position"},_e={class:"applicant-list-dialog__count"},ve={class:"applicant-list-dialog__content"},ge=W({__name:"ApplicantListDialog",props:{visible:{type:Boolean},shift:{default:null}},emits:["update:visible","close","accept","reject"],setup(v,{emit:F}){const h=v,p=F,s=I(()=>h.shift?[{id:"1",name:"張小明",position:"桌邊荷官",shiftDate:"2024-09-15",startTime:"18:00",endTime:"23:00",experience:3,rating:4.8,skills:["百家樂","21點","輪盤"],workAreas:["台北市","新北市"],phone:"0912-345-678",email:"ming@example.com",applicationTime:"2024-09-10 15:30",totalHours:120,joinDate:"2024-01-01",lastActivity:"2024-09-14",status:"pending"},{id:"2",name:"李美華",position:"桌邊荷官",shiftDate:"2024-09-15",startTime:"18:00",endTime:"23:00",experience:5,rating:4.9,skills:["百家樂","德州撲克"],workAreas:["台北市"],phone:"0987-654-321",email:"hua@example.com",applicationTime:"2024-09-10 16:45",totalHours:250,joinDate:"2023-06-01",lastActivity:"2024-09-15",status:"accepted"},{id:"3",name:"王大偉",position:"桌邊荷官",shiftDate:"2024-09-15",startTime:"18:00",endTime:"23:00",experience:2,rating:4.5,skills:["21點","輪盤"],workAreas:["新北市"],phone:"0923-456-789",email:"david@example.com",applicationTime:"2024-09-11 09:20",totalHours:80,joinDate:"2024-03-01",lastActivity:"2024-09-13",status:"accepted"}]:[]),_=I(()=>h.shift?new Date(h.shift.date).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"}):""),g=I(()=>h.shift?`${h.shift.startTime}-${h.shift.endTime}`:""),y=I(()=>`${s.value.length}/10`),w=()=>{p("update:visible",!1),p("close")},V=()=>{w()},S=f=>{p("accept",f)},M=f=>{p("reject",f)};return(f,k)=>{const T=q,z=L;return n(),$(z,{show:v.visible,position:"center",style:{width:"90dvw",height:"90dvh",maxWidth:"768px"},round:"",closeable:"","close-icon-position":"top-right",onClose:w,onClickOverlay:V},{default:D(()=>[i("div",ce,[i("div",de,[k[0]||(k[0]=i("h2",{class:"applicant-list-dialog__title"},"應徵名單",-1)),i("div",{class:"close-button",onClick:w},[c(T,{name:"close",size:"16",color:"black"})])]),i("div",pe,[i("div",ue,[i("div",me,m(_.value)+" · "+m(g.value),1),i("div",he,m(v.shift?.title)+" · "+m(v.shift?.location),1),i("div",_e,"應徵人數 : "+m(y.value),1)])]),i("div",ve,[(n(!0),u(x,null,j(s.value,A=>(n(),$(Q,{key:A.id,applicant:A,onAccept:S,onReject:M},null,8,["applicant"]))),128))])])]),_:1},8,["show"])}}}),Te=E(ge,[["__scopeId","data-v-0966fa39"]]);export{Te as A,De as E};
