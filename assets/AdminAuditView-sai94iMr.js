import{d as B,r as p,l as h,v as U,q as t,e as b,N as y,H as z,C as n,A as C,y as R,Z as L,G as _,_ as W,g as M,Q as q,x as E,M as G}from"./index-C0EGTbts.js";import"./index-Dyw-Fs8I.js";import{F as O}from"./index-DlkmlvZM.js";import{F as Q}from"./FilterHeader-ZvBcP9RO.js";import{u as Z}from"./useDialog-BisuymnP.js";import"./index-DzpEujkO.js";import"./index-CKmGNt9r.js";import"./index-D-Jas7mg.js";import"./index-BGRkTP_z.js";const J={class:"audit-time-card"},K={class:"audit-time-card__header"},P={class:"audit-time-card__id"},X={class:"audit-time-card__id-text"},Y={class:"audit-time-card__basic-info"},tt={class:"audit-time-card__info-row"},et={class:"audit-time-card__info-text"},at={class:"audit-time-card__info-row"},st={class:"audit-time-card__info-text"},it={class:"audit-time-card__info-row"},ot={class:"audit-time-card__info-text"},lt={class:"audit-time-card__work-details"},dt={class:"audit-time-card__work-item"},nt={class:"audit-time-card__work-value"},ut={class:"audit-time-card__work-item"},ct={class:"audit-time-card__work-value audit-time-card__work-value--highlight"},rt={key:0,class:"audit-time-card__remark-section"},mt={class:"audit-time-card__remark-content"},vt={class:"audit-time-card__contact-section"},pt={class:"audit-time-card__toggle-text"},_t={key:0,class:"audit-time-card__contact-info"},ft={class:"audit-time-card__contact-item"},ht={class:"audit-time-card__contact-value"},gt={class:"audit-time-card__contact-item"},bt={class:"audit-time-card__contact-value"},wt={class:"audit-time-card__submission-time"},kt={key:1,class:"audit-time-card__actions"},xt={class:"audit-dialog-content"},Dt={class:"audit-dialog-field-group"},jt={class:"audit-dialog-content"},yt={class:"audit-dialog-field-group"},Ct={class:"audit-dialog-field-group"},At={class:"audit-dialog-content"},Tt={class:"audit-dialog-field-group"},Nt=B({__name:"AuditTimeCard",props:{timesheetData:{}},emits:["approve","adjust","reject"],setup(i,{emit:D}){const g=i,x=D,c=p(!1),r=p(!1),w=p(!1),f=p(!1),s=p(""),m=p(""),j={pending:{text:"å¾…å¯©",class:"audit-time-card__status-tag--pending"},submitted:{text:"å·²æäº¤",class:"audit-time-card__status-tag--pending"},approved:{text:"å·²é€šéŽ",class:"audit-time-card__status-tag--approved"},accepted:{text:"å·²æŽ¥å—",class:"audit-time-card__status-tag--approved"},rejected:{text:"å·²é§å›ž",class:"audit-time-card__status-tag--rejected"},adjusted:{text:"å·²èª¿æ•´",class:"audit-time-card__status-tag--adjusted"},withdrawn:{text:"å·²æ’¤å›ž",class:"audit-time-card__status-tag--rejected"}},A=()=>{c.value=!c.value},T=(d,e,k)=>`${d} ${e}-${k}`,N=d=>new Date(d).toLocaleString("zh-TW",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),S=()=>{r.value=!0},V=()=>{x("approve",g.timesheetData.id,s.value),r.value=!1,s.value=""},H=()=>{r.value=!1,s.value=""},$=()=>{m.value=g.timesheetData.declaredHours.toString(),w.value=!0},F=()=>{const d=parseFloat(m.value)||0;x("adjust",g.timesheetData.id,d,s.value),w.value=!1,s.value="",m.value=""},a=()=>{w.value=!1,s.value="",m.value=""},l=()=>{f.value=!0},o=()=>{x("reject",g.timesheetData.id,s.value),f.value=!1,s.value=""},v=()=>{f.value=!1,s.value=""};return(d,e)=>{const k=O,I=L;return _(),h(U,null,[t("div",J,[t("div",{class:z(["audit-time-card__status-tag",j[i.timesheetData.status].class])},n(j[i.timesheetData.status].text),3),t("div",K,[t("div",P,[t("span",X,"#"+n(i.timesheetData.id),1)]),t("div",Y,[t("div",tt,[e[7]||(e[7]=t("span",{class:"audit-time-card__info-icon"},"ðŸ‘¤",-1)),t("span",et,n(i.timesheetData.applicantName),1)]),t("div",at,[e[8]||(e[8]=t("span",{class:"audit-time-card__info-icon"},"ðŸ¢",-1)),t("span",st,n(i.timesheetData.location),1)]),t("div",it,[e[9]||(e[9]=t("span",{class:"audit-time-card__info-icon"},"ðŸ“…",-1)),t("span",ot,n(T(i.timesheetData.date,i.timesheetData.startTime,i.timesheetData.endTime)),1)])])]),t("div",lt,[t("div",dt,[e[10]||(e[10]=t("span",{class:"audit-time-card__work-label"},"è·ä½ :",-1)),t("span",nt,n(i.timesheetData.position),1)]),t("div",ut,[e[11]||(e[11]=t("span",{class:"audit-time-card__work-label"},"ç”³å ±æ™‚æ•¸ :",-1)),t("span",ct,n(i.timesheetData.declaredHours)+" å°æ™‚",1)])]),i.timesheetData.auditNote?(_(),h("div",rt,[e[12]||(e[12]=t("div",{class:"audit-time-card__remark-label"},"å¯©æ ¸å‚™è¨» :",-1)),t("div",mt,n(i.timesheetData.auditNote),1)])):y("",!0),t("div",vt,[t("button",{class:"audit-time-card__contact-toggle",onClick:A},[t("span",pt,n(c.value?"éš±è—è¯çµ¡è³‡è¨Š":"é¡¯ç¤ºè¯çµ¡è³‡è¨Š"),1)]),c.value?(_(),h("div",_t,[t("div",ft,[e[13]||(e[13]=t("span",{class:"audit-time-card__contact-icon"},"ðŸ“ž",-1)),t("span",ht,n(i.timesheetData.phone),1)]),t("div",gt,[e[14]||(e[14]=t("span",{class:"audit-time-card__contact-icon"},"âœ‰ï¸",-1)),t("span",bt,n(i.timesheetData.email),1)])])):y("",!0)]),e[18]||(e[18]=t("div",{class:"audit-time-card__divider"},null,-1)),t("div",wt," æäº¤æ™‚é–“: "+n(N(i.timesheetData.submittedAt)),1),i.timesheetData.status==="pending"?(_(),h("div",kt,[t("button",{class:"audit-time-card__btn audit-time-card__btn--approve",onClick:S},[...e[15]||(e[15]=[t("span",{class:"audit-time-card__btn-icon"},"âœ“",-1),C(" é€šéŽ ",-1)])]),t("button",{class:"audit-time-card__btn audit-time-card__btn--adjust",onClick:$},[...e[16]||(e[16]=[t("span",{class:"audit-time-card__btn-icon"},"âœï¸",-1),C(" èª¿æ•´ ",-1)])]),t("button",{class:"audit-time-card__btn audit-time-card__btn--reject",onClick:l},[...e[17]||(e[17]=[t("span",{class:"audit-time-card__btn-icon"},"âœ•",-1),C(" é§å›ž ",-1)])])])):y("",!0)]),b(I,{show:r.value,"onUpdate:show":e[1]||(e[1]=u=>r.value=u),title:"é€šéŽå¯©æ ¸","show-cancel-button":"","confirm-button-text":"ç¢ºèªé€šéŽ","cancel-button-text":"å–æ¶ˆ","confirm-button-color":"#27AE60",onConfirm:V,onCancel:H},{default:R(()=>[t("div",xt,[e[20]||(e[20]=t("div",{class:"audit-dialog-description"},"ç¢ºå®šè¦é€šéŽæ­¤ç”³å ±æ™‚æ•¸å—Ž?",-1)),t("div",Dt,[e[19]||(e[19]=t("div",{class:"audit-dialog-field-label"},"å¯©æ ¸å‚™è¨»",-1)),b(k,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=u=>s.value=u),type:"textarea",placeholder:"è«‹è¼¸å…¥å¯©æ ¸å‚™è¨» (é¸å¡«)",rows:"3",autosize:""},null,8,["modelValue"])])])]),_:1},8,["show"]),b(I,{show:w.value,"onUpdate:show":e[4]||(e[4]=u=>w.value=u),title:"èª¿æ•´æ™‚æ•¸","show-cancel-button":"","confirm-button-text":"ç¢ºèªèª¿æ•´","cancel-button-text":"å–æ¶ˆ","confirm-button-color":"#2F80ED",onConfirm:F,onCancel:a},{default:R(()=>[t("div",jt,[e[23]||(e[23]=t("div",{class:"audit-dialog-description"},"ç¢ºå®šè¦èª¿æ•´æ­¤ç”³å ±æ™‚æ•¸å—Ž?",-1)),t("div",yt,[e[21]||(e[21]=t("div",{class:"audit-dialog-field-label"},"å¯©æ ¸æ™‚æ•¸",-1)),b(k,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=u=>m.value=u),type:"digit",placeholder:"è«‹è¼¸å…¥èª¿æ•´å¾Œçš„æ™‚æ•¸"},null,8,["modelValue"])]),t("div",Ct,[e[22]||(e[22]=t("div",{class:"audit-dialog-field-label"},"å¯©æ ¸å‚™è¨»",-1)),b(k,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=u=>s.value=u),type:"textarea",placeholder:"è«‹è¼¸å…¥å¯©æ ¸å‚™è¨» (é¸å¡«)",rows:"3",autosize:""},null,8,["modelValue"])])])]),_:1},8,["show"]),b(I,{show:f.value,"onUpdate:show":e[6]||(e[6]=u=>f.value=u),title:"é§å›žç”³è«‹","show-cancel-button":"","confirm-button-text":"ç¢ºèªé§å›ž","cancel-button-text":"å–æ¶ˆ","confirm-button-color":"#EB5757",onConfirm:o,onCancel:v},{default:R(()=>[t("div",At,[e[25]||(e[25]=t("div",{class:"audit-dialog-description"},"ç¢ºå®šè¦é§å›žæ­¤ç”³å ±æ™‚æ•¸å—Ž?",-1)),t("div",Tt,[e[24]||(e[24]=t("div",{class:"audit-dialog-field-label"},"å¯©æ ¸å‚™è¨»",-1)),b(k,{modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=u=>s.value=u),type:"textarea",placeholder:"è«‹è¼¸å…¥å¯©æ ¸å‚™è¨» (é¸å¡«)",rows:"3",autosize:""},null,8,["modelValue"])])])]),_:1},8,["show"])],64)}}}),St=W(Nt,[["__scopeId","data-v-413d7afa"]]),Vt={class:"employer-applicants"},Ht={class:"content-container"},$t={class:"status-filter-buttons"},Ft=["onClick"],It={key:0,class:"count-badge"},Rt={class:"applicants-list"},Ut=B({name:"AdminAuditView",__name:"AdminAuditView",setup(i){const{showConfirm:D,showSuccess:g,showDangerConfirm:x}=Z(),c=p([{id:"TS001",applicantId:"USER001",applicantName:"å¼µå°æ˜Ž",position:"æ¡Œé‚Šè·å®˜",date:"2024-09-15",startTime:"18:00",endTime:"23:00",declaredHours:5,breakDuration:0,location:"è±ªè¯è³­å ´",address:"å°åŒ—å¸‚ä¿¡ç¾©å€",shiftId:"SH001",workingHours:5,dealerNote:"æº–æ™‚ä¸Šä¸‹ç­,å·¥ä½œè¡¨ç¾è‰¯å¥½",submittedAt:"2024-09-16T09:30:00",phone:"0912-345-678",email:"ming@example.com",status:"pending"},{id:"TS002",applicantId:"USER002",applicantName:"æŽç¾Žè¯",position:"æ¡Œé‚Šè·å®˜",date:"2024-09-15",startTime:"18:00",endTime:"23:00",declaredHours:5,breakDuration:0,location:"è±ªè¯è³­å ´",address:"å°åŒ—å¸‚ä¿¡ç¾©å€",shiftId:"SH002",workingHours:5,dealerNote:"å·¥ä½œèªçœŸè² è²¬",auditNote:"æ™‚æ•¸è¨ˆç®—æ­£ç¢ºï¼Œå·¥ä½œè¡¨ç¾è‰¯å¥½",submittedAt:"2024-09-16T10:15:00",phone:"0987-654-321",email:"hua@example.com",status:"approved"},{id:"TS003",applicantId:"USER003",applicantName:"çŽ‹å¤§å‰",position:"ç™¼ç‰Œå“¡",date:"2024-09-16",startTime:"14:00",endTime:"22:00",declaredHours:8,breakDuration:60,location:"è±ªè¯è³­å ´",address:"å°åŒ—å¸‚ä¿¡ç¾©å€",shiftId:"SH003",workingHours:7,dealerNote:"ç¶“é©—è±å¯Œï¼Œè¡¨ç¾å„ªç•°",auditNote:"æ™‚æ•¸æœ‰èª¤ï¼Œå¯¦éš›å·¥ä½œæ™‚é–“ç‚º7å°æ™‚",submittedAt:"2024-09-17T08:20:00",phone:"0923-456-789",email:"david@example.com",status:"rejected"},{id:"TS004",applicantId:"USER004",applicantName:"é™³å°èŠ³",position:"ç™¾å®¶æ¨‚è·å®˜",date:"2024-09-15",startTime:"20:00",endTime:"02:00",declaredHours:6,breakDuration:0,location:"è±ªè¯è³­å ´",address:"å°åŒ—å¸‚ä¿¡ç¾©å€",shiftId:"SH004",workingHours:6,dealerNote:"æœå‹™æ…‹åº¦è‰¯å¥½",submittedAt:"2024-09-16T11:45:00",phone:"0955-123-456",email:"fang@example.com",status:"pending"}]),r=p("all"),w=p([{label:"å…¨éƒ¨",value:"all"},{label:"å¾…å¯©",value:"pending"},{label:"å·²é€šéŽ",value:"approved"},{label:"å·²é§å›ž",value:"rejected"},{label:"å·²èª¿æ•´",value:"adjusted"}]),f=p({all:0,pending:0,approved:0,rejected:0,adjusted:0}),s=p({fields:[{type:"search",key:"search",label:"æœå°‹",placeholder:"æœå°‹è·ä½/å•†å®¶",width:"full"},{type:"select",key:"status",label:"ç‹€æ…‹",placeholder:"é¸æ“‡ç‹€æ…‹",width:"half",options:[{text:"å…¨éƒ¨ç‹€æ…‹",value:"all"},{text:"å°šæœ‰ç¼ºé¡",value:"available"},{text:"æš«ç„¡ç¼ºé¡",value:"unavailable"}]},{type:"select",key:"position",label:"è·ä½",placeholder:"é¸æ“‡è·ä½",width:"half",options:[{text:"å…¨éƒ¨è·ä½",value:"all"},{text:"ç™¼ç‰Œå“¡",value:"dealer"},{text:"ç™¾å®¶æ¨‚è·å®˜",value:"baccarat"},{text:"æ¡Œé‚Šè·å®˜",value:"table"}]},{type:"date",key:"date",label:"å·¥ä½œæ—¥æœŸ",placeholder:"é¸æ“‡æ—¥æœŸ",width:"half"},{type:"select",key:"sortBy",label:"æŽ’åº",placeholder:"é¸æ“‡æŽ’åºæ–¹å¼",width:"half",options:[{text:"æœ€æ–°åˆ°æœ€èˆŠ",value:"newest"},{text:"æœ€èˆŠåˆ°æœ€æ–°",value:"oldest"},{text:"æ™‚è–ªé«˜åˆ°ä½Ž",value:"wage_high"},{text:"æ™‚è–ªä½Žåˆ°é«˜",value:"wage_low"}]}],values:{search:"",status:"all",position:"all",date:"",sortBy:"newest"}}),m=()=>{const a={all:c.value.length,pending:0,approved:0,rejected:0,adjusted:0};c.value.forEach(l=>{switch(l.status){case"pending":a.pending++;break;case"approved":a.approved++;break;case"rejected":a.rejected++;break;case"adjusted":a.adjusted++;break}}),f.value=a},j=a=>{r.value=a},A=M(()=>r.value==="all"?c.value:c.value.filter(a=>a.status===r.value)),T=(a,l)=>{s.value={...s.value,values:{...s.value.values,[a]:l}}},N=a=>{console.log("æœå°‹:",a)},S=()=>{console.log("åˆ‡æ›ç¯©é¸é¸å–®")},V=()=>{s.value.values={search:"",status:"all"},r.value="all"},H=async(a,l)=>{if(await D({title:"ç¢ºèªé€šéŽ",message:"ç¢ºå®šè¦é€šéŽæ­¤å·¥æ™‚è¨˜éŒ„å—Žï¼Ÿ"})){const v=c.value.find(d=>d.id===a);v&&(v.status="approved",l&&(v.auditNote=l),await g("å·¥æ™‚è¨˜éŒ„å·²é€šéŽ"),m())}},$=async(a,l,o)=>{if(await D({title:"ç¢ºèªèª¿æ•´",message:`ç¢ºå®šè¦å°‡æ™‚æ•¸èª¿æ•´ç‚º ${l} å°æ™‚å—Žï¼Ÿ`})){const d=c.value.find(e=>e.id===a);d&&(d.status="adjusted",d.declaredHours=l,o&&(d.auditNote=o),await g("æ™‚æ•¸å·²èª¿æ•´"),m())}},F=async(a,l)=>{if(await x("ç¢ºå®šè¦é§å›žæ­¤å·¥æ™‚è¨˜éŒ„å—Žï¼Ÿ","ç¢ºèªé§å›ž")){const v=c.value.find(d=>d.id===a);v&&(v.status="rejected",l&&(v.auditNote=l),await g("å·¥æ™‚è¨˜éŒ„å·²é§å›ž"),m())}};return q(()=>{m()}),(a,l)=>(_(),h("div",Vt,[b(Q,{title:"æ‡‰å¾µåå–®","filter-config":s.value,sticky:!0,"show-title":!1,onUpdateFilter:T,onSearch:N,onToggleFilter:S,onReset:V},null,8,["filter-config"]),t("div",Ht,[t("div",$t,[(_(!0),h(U,null,E(w.value,o=>(_(),h("button",{key:o.value,onClick:v=>j(o.value),class:z([{active:r.value===o.value,[`status-btn--${o.value}`]:!0},"status-btn"])},[C(n(o.label)+" ",1),f.value[o.value]>0?(_(),h("span",It," ("+n(f.value[o.value])+") ",1)):y("",!0)],10,Ft))),128))]),t("div",Rt,[(_(!0),h(U,null,E(A.value,o=>(_(),G(St,{key:o.id,"timesheet-data":o,onApprove:H,onAdjust:$,onReject:F},null,8,["timesheet-data"]))),128))])])]))}}),Qt=W(Ut,[["__scopeId","data-v-ed52b179"]]);export{Qt as default};
